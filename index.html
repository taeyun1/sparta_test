<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<title>ì§­í”Œë¦­ìŠ¤</title>

	<style>
		@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100..900&display=swap');

		* {
			box-sizing: border-box;
			font-family: "Noto Sans KR", sans-serif;
			margin: 0;
			padding: 0;
		}

		body {
			background-color: black;
		}

		.main {
			color: white;

			background-image: linear-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3)), url("https://occ-0-1123-1217.1.nflxso.net/dnm/api/v6/6AYY37jfdO6hpXcMjf9Yu5cnmO0/AAAABeIfo7VL_VDyKnljV66IkR-4XLb6xpZqhpLSo3JUtbivnEW4s60PD27muH1mdaANM_8rGpgbm6L2oDgA_iELHZLZ2IQjG5lvp5d2.jpg?r=e6e.jpg");
			background-position: center;
			background-size: cover;
		}

		.mycards {
			width: 1200px;
			margin: 20px auto 20px auto;
		}

		.mypostingbox {
			width: 500px;
			margin: 20px auto 20px auto;

			border-radius: 5px;
			box-shadow: 0px 0px 3px 0px gray;
			padding: 18px;
		}

		.form-floating>input,
		.form-floating>input:focus {
			background-color: transparent;
			color: white;
		}

		/* inputí¬ì»¤ìŠ¤ì‹œ ë°°ê²½ íˆ¬ëª… ë° ì»¬ëŸ¬ ë³€ê²½*/


		.form-floating>label {
			color: #939393;
		}

		.input-group>label {
			background-color: transparent;
			color: #939393;
		}

		.mypostingbox>button {
			width: 100%;
		}
	</style>

	<script type="module">
		import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
		import { getFirestore } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
		import { collection, addDoc } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
		import { getDocs } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";

		// Firebase êµ¬ì„± ì •ë³´ ì„¤ì •
		const firebaseConfig = {
			// ë³¸ì¸ êµ¬ì„± ê°ì²´ ì±„ìš°ê¸°
			apiKey: "AIzaSyDJDmpLDsHdSTIfgHkgOGShyGav-AV-XsY",
			authDomain: "sparta-c12ee.firebaseapp.com",
			projectId: "sparta-c12ee",
			storageBucket: "sparta-c12ee.appspot.com",
			messagingSenderId: "146342552076",
			appId: "1:146342552076:web:f3dcd0c9f0ce672b72c429",
			measurementId: "G-FMXZ6WVT8H"
		};

		// Firebase ì¸ìŠ¤í„´ìŠ¤ ì´ˆê¸°í™”
		const app = initializeApp(firebaseConfig);
		const db = getFirestore(app);

		// FireBaseì— ë°ì´í„° ì €ì¥
		$("#postingbtn").click(async function () { // ê¸°ë¡í•˜ê¸° ë²„íŠ¼ì„ ëˆ„ë¥´ë©´
			let image = $('#image').val();
			let title = $('#title').val();
			let star = $('#star').val();
			let comment = $('#comment').val();

			let doc = { // ë„£ê³ ì‹¶ì€ ë°ì´í„°
				'image': image,
				'title': title,
				'star': star,
				'comment': comment,
			};

			await addDoc(collection(db, "movies"), doc); // docë°ì´í„°ê°€ "albums"ì»¬ë ‰ì…˜ì— ì €ì¥ë¨
			alert('ì €ì¥ ì™„ë£Œ!');
			window.location.reload();
		});

		let url = "http://spartacodingclub.shop/sparta_api/weather/seoul";
		fetch(url).then(res => res.json()).then(data => {
			console.log(data.temp);
			let temp = data.temp;
			$('#temp').text(temp);

			if (temp < 20) {
				$('#hotcold').text('â˜ï¸');
			} else {
				$('#hotcold').text('ğŸŒ');
			}
		});

		// FBì—ì„œ ë°ì´í„° ê°€ì ¸ì™€ ì¶œë ¥
		let docs = await getDocs(collection(db, "movies")); // albumsì»¬ë ‰ì…˜ì—ì„œ ê°€ì ¸ì˜¤ê² ë‹¤.
		docs.forEach((doc) => {
			let row = doc.data();
			console.log(row);

			let image = row.image;
			let title = row.title;
			let star = row.star;
			let comment = row.comment;
			let cardGroup = $('#cardGroup');

			let temp_html = `
			<div class="col">
				<div class="card h-100">
					<img src="${image}"
						class="card-img-top" alt="ì˜í™” ì´ë¯¸ì§€">
					<div class="card-body">
						<h5 class="card-title">${title}</h5>
						<p class="card-text">í‰ì  : ${star}</p>
						<p class="card-text">${comment}</p>
					</div>
				</div>
			</div>`;
			cardGroup.append(temp_html)
		});


		$("#openClose").click(async function () {
			$('#postingbox').toggle();
		});




	</script>
</head>

<body>
	<header class="p-3 text-bg-dark">
		<div class="container">
			<div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
				<a href="/" class="d-flex align-items-center mb-2 mb-lg-0 text-white text-decoration-none">
					<svg class="bi me-2" width="40" height="32" role="img" aria-label="Bootstrap">
						<use xlink:href="#bootstrap"></use>
					</svg>
				</a>

				<ul class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0">
					<li><a href="#" class="nav-link px-2 text-danger">ì§­í”Œë¦­ìŠ¤</a></li>
					<li><a href="#" class="nav-link px-2 text-white">í™ˆ</a></li>
					<li><a href="#" class="nav-link px-2 text-white">ì‹œë¦¬ì¦ˆ</a></li>
					<li><a href="#" class="nav-link px-2 text-white">ì˜í™”</a></li>
					<li><a href="#" class="nav-link px-2 text-white">ì°œí•œ ì½˜í…ì¸ </a></li>
					<li><a href="#" class="nav-link px-2 text-white">í˜„ì¬ê¸°ì˜¨: <span id="temp"></span>ë„ <span id="hotcold"></span>
						</a></li>
				</ul>

				<form class="col-12 col-lg-auto mb-3 mb-lg-0 me-lg-3" role="search">
					<input type="search" class="form-control form-control-dark text-bg-dark" placeholder="Search..."
						aria-label="Search">
				</form>

				<div class="text-end">
					<button type="button" class="btn btn-outline-light me-2">Login</button>
					<button type="button" class="btn btn-danger">Sign-up</button>
				</div>
			</div>
		</div>
	</header>

	<main class="main">
		<div class="p-5 mb-4 bg-body-tertiary rounded-3">
			<div class="container-fluid py-5">
				<h1 class="display-5 fw-bold">í‚¹ë¤</h1>
				<p class="col-md-8 fs-4">ë³‘ë“  ì™•ì„ ë‘˜ëŸ¬ì‹¸ê³  í‰í‰í•œ ì†Œë¬¸ì´ ë– ëˆë‹¤. ì–´ë‘ ì— ë’¤ë®ì¸ ì¡°ì„ , ê¸°ì´í•œ ì—­ë³‘ì— ì‹ ìŒí•˜ëŠ” ì‚°í•˜. ì •ì²´ ëª¨ë¥¼ ì•…ì— ë§ì„œ ë°±ì„±ì„ êµ¬ì›í•  í¬ë§ì€ ì˜¤ì§ ì„¸ìë¿ì´ë‹¤.
				</p>
				<button id="openClose" type="button" class="btn btn-outline-light btn-lg">ì˜í™” ê¸°ë¡í•˜ê¸°</button>
				<button type="button" class="btn btn-outline-light btn-lg">ìƒì„¸ì •ë³´</button>
			</div>
		</div>
	</main>

	<div class="mypostingbox" id="postingbox">
		<div class="form-floating mb-3">
			<input type="email" class="form-control" id="image" placeholder="ì˜í™” ì´ë¯¸ì§€ ì£¼ì†Œ">
			<label for="floatingInput">ì˜í™” ì´ë¯¸ì§€ ì£¼ì†Œ</label>
		</div>

		<div class="form-floating mb-3">
			<input type="email" class="form-control" id="title" placeholder="ì˜í™” ì œëª©">
			<label for="floatingInput">ì˜í™” ì œëª©</label>
		</div>

		<div class="input-group mb-3">
			<label class="input-group-text" for="inputGroupSelect01">ë³„ì </label>
			<select class="form-select" id="star">
				<option selected>ë³„ì  ì„ íƒ</option>
				<option value="â­">â­</option>
				<option value="â­â­">â­â­</option>
				<option value="â­â­â­">â­â­â­</option>
				<option value="â­â­â­â­">â­â­â­â­</option>
				<option value="â­â­â­â­â­">â­â­â­â­â­</option>
			</select>
		</div>

		<div class="form-floating mb-3">
			<input type="email" class="form-control" id="comment" placeholder="ì¶”ì²œ ì´ìœ ">
			<label for="floatingInput">ì¶”ì²œ ì´ìœ </label>
		</div>

		<button id="postingbtn" type="button" class="btn btn-danger">ê¸°ë¡í•˜ê¸°</button>
	</div>

	<div class="mycards">
		<div id="cardGroup" class="row row-cols-1 row-cols-md-4 g-4">
			<!-- ì¹´ë“œ -->
		</div>
	</div>
</body>

</html>